# 技巧65： 规范光标位置、直达目标以及终止宏
> 介绍执行宏时候的最佳应用方式， 能使得宏执行的时候有更好的一致性

#### 黄金法则：**录制宏时，确保每条指令都可以被重复执行**

##### rule 1: 规范光标位置

开始录制宏时，确保光标位置

1. 常见的光标位置：行首（`0`），下一处查找匹配项（`n`），当前文件的行首（`gg`）

##### rule 2: 用开始命令直达目标

1. 尽量不要使用`hhhh`，`jjj`这样的形式来达到目标位置
2. 尽量使用`w`，`b`，`e`，`ge`这样的操作


##### rule 3: 当动作命令失败时，宏终止执行

失败情况举例：光标已经位于行末，又执行了`l`命令。

1. 失败时vim会发出`哔`的声音，设置`visualbell`可以关闭提示音
2. 宏命令失败后会中止之后的指令
3. 对于查找替换类型的宏，如果不知道执行多少次，就多写一些，比如`1000@a`，执行到最后一次后会终止

<br>  

|上一篇|下一篇|
|:---|---:|
|[技巧64 宏的读取和执行](tip64.md)|[技巧66 加次数回放宏](tip66.md)|
